\documentclass{amsart}

\input{decls}
\input{macros}
\def\name#1{\ulcorner #1\urcorner}
\let\J\iJ
\mdef\Mf{\sM_{\mathbf{f}}}
\let\C\cC
\let\T\cT
\let\r\ir
\autodefs{\fId}
\let\Id\fId
\let\G\cG
\def\dG{\widehat{\G}}
\usepackage{scalefnt}
\newcommand{\mysc}[1]{\text{\scalefont{0.76}\uppercase{#1}}}
\renewcommand{\idover}[4][]{\fId_{#1}^{#4}(#2,#3)}
\setcounter{tocdepth}{1}
\usepackage[utf8]{inputenc}
\hyphenation{pseu-do-func-tor-ial}

\title{Semantics of pushouts in homotopy type theory}

\author{Peter LeFanu Lumsdaine}
\author{Michael Shulman}

\begin{document}

\maketitle
\tableofcontents

\section{Introduction}
\label{sec:introduction}



\section{Good model categories}
\label{sec:model-categ-type}

We will work throughout in the following context.

\begin{defn}
  A \textbf{good model category} is a model category \sM with the following additional properties.
  \begin{enumerate}
  \item \sM is simplicial.\label{item:m0}
  \item The cofibrations are the monomorphisms.\label{item:m1}
  \item \sM is right proper, i.e.\ weak equivalences are preserved by pullback along fibrations.\label{item:m2}
  \item As a category, \sM is locally cartesian closed.\label{item:m3}
  \end{enumerate}
\end{defn}

In particular, a \emph{Cisinski model category}~\cite{cisinski:topos,cisinski:presheaves} is a model structure on a Grothendieck topos whose cofibrations are the monomorphisms.
Therefore, any right proper simplicial Cisinski model category is a good model category.

Assumption~\ref{item:m0} tells us that \sM is simplicially enriched, with powers and copowers\footnote{Also known as cotensors and tensors, respectively.} satisfying the pushout-product and pullback-corner axioms.
This enables us to construct path objects (which model identity types) as simplicial powers.
Specifically, if $\ivl$ denotes the 1-simplex (the simplicial interval), then for any fibrant object $A$, the power $A^\ivl$ is a path-object for $A$.
Likewise, if $p:A\fib \Gamma$ is a fibration, then the ``local power'' $B^\ivl_A = A^\ivl \times_{\Gamma^\ivl} \Gamma$ is a path-object for $A$ regarded as a type over $\Gamma$; see \cref{thm:stable-id}.

This is important for us because it means that homotopies can be represented in adjoint form: a map $A\to B^\ivl$ is equivalent to a map $A\ten \ivl \to B$, where $A\ten \ivl$ is the simplicial copower.
Note that like other colimits, the simplicial copower of $p:A\fib \Gamma$ in the slice category over $\Gamma$ is just $A\ten\ivl$ with the projection $A\ten\ivl \to A \to \Gamma$.
Moreover, each slice category of \sM is a simplicial model category, and pullback preserves both simplicial powers and copowers.

Every good model category is a type-theoretic model category in the sense of~\cite{shulman:invdia}, and hence the subcategory of fibrant objects is a type-theoretic fibration category.
In particular, cofibrations are stable under pullback, so acyclic cofibrations are stable under pullback along fibrations, and hence dependent products of fibrations along fibrations are fibrations.
This gives the categorical analogue of the structure required to model type theory with dependent sums (including a unit type), dependent products, and an identity type.

To actually construct such an interpretation requires a coherence theorem\footnote{And also an ``initiality theorem''.} making all the structure strictly stable under pullback.
We will use the coherence method of~\cite{lw:localuniv}, which applies to many different kinds of structure: it shows that if a structure is ``weakly stable'', meaning that the pullback of \emph{a} structure is \emph{a} structure, then in the ``left adjoint splitting'' it can be made strictly stable.
The idea is that if $\Gamma$ is an object of $\sM$, then ``a type $A$ in context $\Gamma$'' is interpreted by a fibration $E_A \fib V_A$ and a map $\name{A}:\Gamma\to V_A$; we call $V_A$ the ``local universe'' and think of this as a representative of the pullback of $E_A$ along $\name{A}$.
Reindexing of such types is done by simple composition (``$f^*A$'' is $\name{A}\circ f$) which is strictly associative.
Moreover, the presence of local universes allows us to apply categorical constructions once in the ``universal case'', making them strictly preserved by reindexing as well.
See~\cite{lw:localuniv} for an extensive discussion; we will prove the relevant results for our situation below.

% We will also need the following enhancement of~\cite{lw:localuniv}.
% For a type-theoretic model category, by the \textbf{fibrant left adjoint splitting} we mean the substructure of the left adjoint splitting consisting of only those types whose local universe object $V_A$ is fibrant.
% Up to homotopy, this carries the same information, since every map is weakly equivalent to a fibration between fibrant objects.

% \begin{thm}\label{thm:fibrant-lu}
%   In a type-theoretic fibration category, the fibrant left adjoint splitting also inherits strictly stable structure of dependent sums, dependent products, and identity types.
% \end{thm}
% \begin{proof}
%   It suffices to show that the ``universal case'' constructions on local universes all preserve fibrancy.
%   The product of fibrant objects is certainly fibrant, and the construction $V_A \triangleleft V_B$ from~\cite[\S3.3]{lw:localuniv} is fibrant if all inputs are since the dependent product of a fibration along a fibration is a fibration.
%   This suffices for the formation rules of dependent sums and products, and the other rules are automatically stable since they are unique (in our context these objects have strict universal properties).

%   For the identity type, the local universe of the formation and introduction rules is just the domain of a composite of fibrations over a fibrant object, hence fibrant.
%   Here we need to consider also the local universe for the elimination and computation rules; but this is also constructed as a dependent product of a fibration along a fibration.
% \end{proof}



\section{Coproducts}
\label{sec:coproducts}

We warm up for pushouts by considering the case of coproducts.
To start with, we specialize the definitions from~\cite[\S3.4.1]{lw:localuniv} to our context of a good model category.
We qualify these definitions with ``typal'' (the adjective of ``type'') to distinguish them from the ordinary categorical constructions in \sM.

\begin{defn}\label{defn:sum}
  A \textbf{typal coproduct} of fibrations $A_1\to \Gamma$ and $A_2\to\Gamma$ consists of a fibration $A_1\oplus A_2 \to\Gamma$ with maps $\nu_i: A_i \to A_1\oplus A_2$ over $\Gamma$ such that for any fibration $C\to A_1\oplus A_2$ with sections $t_i : A_i \to C$ over $\nu_i$, there exists a section $s:A_1\oplus A_2 \to C$ such that $s\circ \nu_i = t_i$.

  We say \sM has \textbf{weakly stable typal coproducts} if for any $A_1\to \Gamma$ and $A_2\to\Gamma$ there exists a typal coproduct $A_1\oplus A_2$ such that for any $\sigma:\Delta\to\Gamma$, the pullback $\sigma^*(A_1\oplus A_2)$ with injections $\sigma^*\nu_i$ is a typal coproduct of $\sigma^*A_1$ and $\sigma^* A_2$.
\end{defn}

\begin{thm}[{\cite[Lemma 3.4.1.4]{lw:localuniv}}]
  If \sM has weakly stable typal coproducts, then its left adjoint splitting models type theory with coproduct types.
  % Moreover, so does its fibrant left adjoint splitting.
\end{thm}
% \begin{proof}
%   The first statement follows from~\cite[Lemma 3.4.1.4]{lw:localuniv}.
%   For the second, it remains to show that fibrancy of local universes is preserved.
%   The local universe for the formation and introduction rules is $V_{A_1}\times V_{A_2}$, which is certainly fibrant if $V_{A_1}$ and $V_{A_2}$ are.
%   The local universe for the elimination and computation rules is more complicated, but involves only fibrations and dependent products, so it is also fibrant if all inputs are.
% \end{proof}

Now, how do we actually \emph{construct} weakly stable typal coproducts?
Of course, since \sM is a model category, it has ordinary categorical coproducts, and the coproduct $A_1 + A_2 \to \Gamma$ satisfies all parts of \cref{defn:sum} except that it may not be a fibration.
(Admittedly, for some particularly nice \sM, such as simplicial sets, it is always a fibration.
However, we treat the general case not only out of a desire for generality, but because in the case of pushouts the analogous argument will be necessary even when \sM is simplicial sets.)

The obvious solution is to fibrantly replace it.
Thus, let $A_1 + A_2 \to A_1\oplus A_2 \fib \Gamma$ be an (acyclic cofibration, fibration) factorization.

\begin{thm}\label{thm:coproduct}
  For any fibrations $A_1 \fib \Gamma$ and $A_2\fib\Gamma$, % with $\Gamma$ a fibrant object, 
  the fibration $A_1\oplus A_2 \fib\Gamma$ is a weakly stable typal coproduct.
\end{thm}
\begin{proof}
  We define the injections by composition with those of $A_1+A_2$.
  To show that $A_1\oplus A_2$ is a typal coproduct, let $C\fib A_1\oplus A_2$ be a fibration with sections $t_i$ over $A_i$.
  Then the universal property of $A_1+A_2$ induces a section $t : A_1+A_2 \to C$, and the lifting property of the acyclic cofibration $A_1+A_2 \to A_1\oplus A_2$ against the fibration $C\fib A_1\oplus A_2$ allows us to extend this section to $A_1\oplus A_2$.

  To show that this typal coproduct is weakly stable, it suffices to show that for any $\sigma :\Delta\to\Gamma$, the pullback $\sigma^*(A_1+A_2) \to \sigma^*(A_1\oplus A_2)$ is again an acyclic cofibration.
  Since cofibrations are stable under pullback, this map is a cofibration; thus it remains to show it is a weak equivalence.
  Weak equivalences are not generally stable under pullback, but weak equivalences between fibrations are; so we would be done if $A_1+A_2 \to \Gamma$ were a fibration, but the whole point is that it may not be.

  Right properness of \sM ensures that weak equivalences are also stable under pullback along fibrations, so we would be done if $\sigma$ were a fibration.
  In general it may not be either, but we can factor it as an acyclic cofibration followed by a fibration.
  Thus, without loss of generality we may assume that $\sigma$ is an acyclic cofibration.

  In this case, right properness tells us that the induced maps $\sigma^*A_i \to A_i$ and $\sigma^*(A_1\oplus A_2) \to (A_1\oplus A_2)$ are weak equivalences, hence acyclic cofibrations, since they are pullbacks of $\sigma$ along fibrations.
  Moreover, acyclic cofibrations are closed under coproducts (being the left class of a weak factorization system), so the induced map $\sigma^*A_1 +\sigma^*A_2 \to A_1+A_2$ is an acyclic cofibration.
  Moreover, since $\sigma^*$ is a left adjoint, it preserves coproducts.
  Thus, in the following square
  \[ \xymatrix{ \sigma^*(A_1+A_2) \ar[r]^-\sim \ar[d] & A_1+A_2 \ar[d]^\sim \\ \sigma^*(A_1\oplus A_2) \ar[r]_-\sim & A_1\oplus A_2} \]
  all the marked maps are acyclic cofibrations, hence weak equivalences.
  Hence, by 2-out-of-3, so is the remaining map, which is what we wanted.
\end{proof}

\begin{cor}
  The left adjoint splitting of \sM models coproduct types.\qed
\end{cor}


\section{Pushouts in model categories}
\label{sec:pushouts}

Higher inductive pushouts are not a traditionally standard type constructor, so we need to begin with definitions.
First we consider a sort of weakly stable structure that only makes sense in a context where we have simplicial homotopies.
In \cref{sec:coherence-pushouts} we will rephrase this in type-theoretic language and prove the relevant local universes coherence theorem.

\begin{defn}\label{defn:ivl-pushout}
  Let $f_1:A\to B_1$ and $f_2:A\to B_2$ be morphisms between fibrations $A\fib\Gamma$ and $B_i\fib\Gamma$.
  A \textbf{$\ivl$-typal pushout} is a fibration $D\fib\Gamma$ with maps $\nu_i : B_i \to D$ over $\Gamma$ and a homotopy $\mu:A \ten \ivl \to D$ over $\Gamma$ between $\nu_1 \circ f_1$ and $\nu_2\circ f_2$, such that for any fibration $C\fib D$ equipped with sections $t_i : B_i \to C$ over $\nu_i$ and a homotopy $u:A\ten \ivl \to C$ over $\mu$, there exists a section $s:D\to C$ such that $s\circ \nu_i = t_i$ and $s\circ \mu = u$.

  We say \sM has \textbf{weakly stable $\ivl$-typal pushouts} if for any $f_1,f_2$ there exists a $\ivl$-typal pushout $D$ such that for any $\sigma:\Delta\to\Gamma$, the pullback $\sigma^* D$ with injections $\sigma^*\nu_i$ and homotopy $\sigma^*\mu$ is a $\ivl$-typal pushout of $\sigma^*f_1$ and $\sigma^* f_2$.
\end{defn}

\begin{thm}
  Any good model category has weakly stable $\ivl$-typal pushouts.
\end{thm}
\begin{proof}
  Give $f_1,f_2$, let $Q$ be their explicit homotopy pushout, meaning the pushout of the following diagram in \sM:
  % \[ \xymatrix@-.5pc{ & A \ar[r]^{f_1} \ar[d]^{i_1} & B_1 \\ A \ar[d]_{f_2} \ar[r]^-{i_2} & A\ten \ivl\\ B_2 } \]
  \[ \xymatrix{ A+A \ar[r]^{\iota} \ar[d]_{f_1+f_2} & A\ten\ivl \\ B_1+B_2 } \]
  By construction, this satisfies all parts of \cref{defn:ivl-pushout} except that it may not be a fibration over $\Gamma$.
  (And in this case it really isn't, even in simplicial sets.)
  Let $D$ be its fibrant replacement, i.e.\ we have a factorization $Q\to D \fib \Gamma$ as an acyclic cofibration followed by a fibration.
  Then $D$ has injections and a homotopy obtained by composition from $Q$, and for any fibration $C\fib D$ as in \cref{defn:ivl-pushout} we can first define a section over $Q$ by its universal property and then extend to $D$ by lifting against the acyclic cofibration $Q\to D$.

  It remains to deal with weak stability.
  As in \cref{thm:coproduct}, for this it suffices to show that $\sigma^*Q\to\sigma^*D$ is an acyclic cofibration for any acyclic cofibration $\sigma:\Delta\to\Gamma$, and by 2-out-of-3 it suffices to show that $\sigma^*Q \to Q$ is an acyclic cofibration.
  Again, $\sigma^*$ preserves colimits and simplicial copowers, so $\sigma^*Q $ is the pushout of $\sigma^*B_1+\sigma^*B_2$ and $\sigma^*A \ten\ivl$ under $\sigma^*A+\sigma^*A$.
  Furthermore, again as in \cref{thm:coproduct}, $\sigma^*A \to A$ and $\sigma^*B_i \to B_i$ are acyclic cofibrations, hence so are $\sigma^*A+\sigma^*A \to A+A$ and ${\sigma^*B_1 +\sigma^*B_2} \to B_1+B_2$.

  Now consider the following commutative cube, in which the left-hand and right-hand faces are pushouts, and the objects $R$ and $S$ are also pushouts.
  \[\begin{tikzcd}
    & \sigma^* A+\sigma^*A \arrow[dl] \arrow[rr] \arrow[dd] \ar[dr,phantom,"R"{name=sr}]
    & & A+A \arrow[dl] \arrow[dd] \ar[to=sr] \\
    \sigma^*A\ten\ivl\arrow[dd] \ar[to=sr] & & A\ten\ivl \ar[from=sr] \\
    & \sigma^*B_1+\sigma^*B_2 \arrow[dl] \arrow[rr] \ar[dr,phantom,"S"{name=tr}]
    \ar[from=sr,to=tr,crossing over]
    \arrow[from=ul,to=ur, crossing over]
    & & B_1+B_2 \arrow[dl] \ar[to=tr] \\
    \sigma^*Q \arrow[rr] \ar[to=tr] & & Q \arrow[from=uu, crossing over]
    \ar[from=tr] \\
  \end{tikzcd}\]
  To show that $\sigma^*Q \to Q$ is an acyclic cofibration, it will suffice to show that both of its factors $\sigma^*Q\to S$ and $S\to Q$ are such.
  The former is easy, since it is a pushout of the acyclic cofibration ${\sigma^*B_1 +\sigma^*B_2} \to B_1+B_2$.
  For the latter, a standard argument shows that it is the pushout of the map $R\to A\ten\ivl$ in the upper square.
  However, this map is the pushout-product of the acyclic cofibration $\sigma^*A\to A$ and the cofibration of simplicial sets $\mathbf{2}\to\ivl$.
  Thus since the model structure is simplicial, it is an acyclic cofibration as well.
\end{proof}


\section{Pushouts in comprehension categories}
\label{sec:coherence-pushouts}

Inside of (ordinary, Martin-L\"of) type theory, of course, we do not have a ``$\ivl$'', so \cref{defn:ivl-pushout} does not correspond directly to anything type-theoretic the way \cref{defn:sum} does.
Instead we need a version of this definition that refers only to identity types, which categorically means path-objects.
This is an instance of ``one type constructor stacked on top of another'', like the case of $\mathsf{W}$-types considered in~\cite[\S3.4.4]{lw:localuniv}; hence we need to start by defining good classes of identity types.

Let $(\C,\T)$ be a comprehension category.
As in~\cite{lw:localuniv}, if $A\in\T(\Gamma)$ we denote its comprehension by $\Gamma.A\to\Gamma$, and its reindexing along $\sigma:\Delta\to\Gamma$ by $A[\sigma]$.

The example we have in mind is $\Mf$, whose base category is a good model category \sM and whose types in context $\Gamma$ are the fibrations over $\Gamma$, with tautological comprehension and reindexing by pullback.
That is, the total category of the fibration $\T\to\C$ is the category whose objects are fibrations in $\sM$ and whose morphisms are pullback squares.

In what follows, by a \emph{family} we mean an \emph{indexed family}.
That is, a ``family of elements of $S$'', for any set $S$, consists of a set $F$ and a function $F\to S$.
We often abuse notation by identifying elements of $F$ with their images in $S$, but it is important that such a family is not just a subset of $S$.
There is a category $\mathrm{Fam}$ whose objects are families $F\to S$ and whose morphisms are commutative squares.

\begin{defn}
  A \textbf{stable class of identity types} on \C consists of:
  \begin{itemize}
  \item For each $A\in \T(\Gamma)$, a non-empty family $\G_\Id(A)$ of elements of $\T(\Gamma.A.A)$, called ``good identity types'' $\Id_A$.
    These must be weakly stable under reindexing, in that for any $\sigma:\Delta\to\Gamma$, there is a morphism of families $\G_\Id(A) \to \G_\Id(A[\sigma])$ over the reindexing functor $\T(\Gamma.A.A) \to \T(\Delta.A[\sigma].A[\sigma])$.
    If $\Id_A\in\G_\Id(A)$ is a good identity type for $A$, we abuse notation by writing $\Id_A[\sigma] \in \G_\Id(A[\sigma])$ for its image.
  \item For each good identity type $\Id_A\in\G_\Id(A)$, a non-empty family $\G_\r(A,\Id_A)$ of ``good reflexivity terms'' that are sections of $\Id_A[\delta_A] \in \T(\Gamma.A)$.
    These must be weakly stable under reindexing, in that we have morphisms of families $\G_\r(A,\Id_A) \to \G_\r(A[\sigma],\Id_A[\sigma])$ over the reindexing morphisms of types and good identity types.
  \item For each good identity type $\Id_A$ and good reflexivity term $\r$, and each type $C\in\T(\Gamma.A.A.\Id_A)$ equipped with a section $c$ of $C[\delta_A,\r]\in\T(\Gamma.A)$, a non-empty family $\G_\J(\Id_A,\r,C,c)$ of ``good extensions'' of $c$ to a section of $C$ itself.
    Of course, every good extension must actually be an extension, i.e.\ its composite with $\delta_A \circ \r$ must be $c$.
    Good extensions must also be weakly stable under reindexing, in that we have morphisms $\G_\J(\Id_A,\r,C,c) \to \G_\J(\Id_A[\sigma],\r[\sigma],C[\sigma],c[\sigma])$ over the reindexings of everything else.
  \end{itemize}
\end{defn}

Note that the underlying data of a good identity type and a good reflexivity term consist equivalently of a factorization of $\Gamma.A \to \Gamma.A.A$ through the comprehension $\Gamma.A.A.\Id_A \to \Gamma.A.A$ of some type $\Id_A$.

\begin{thm}\label{thm:stable-id}
  If \sM is a good model category, then \Mf has a stable class of identity types, called the \textbf{canonical stable class of identity types}, in which:
  \begin{itemize}
  \item $\G_\Id(A)$ is the set of objects of $\sM/\Gamma$ equipped with data exhibiting the universal property of the simplicial power $(\Gamma.A)^\ivl_\Gamma$ therein.
  \item For each such object, the factorization $\Gamma.A \to (\Gamma.A)^\ivl_\Gamma \to \Gamma.A.A \cong \Gamma.A \times_\Gamma \Gamma.A$ is induced by powering with the maps $\mathbf{2} \to \ivl \to \mathbf{1}$ of simplicial sets.
    In particular, every good identity type has exactly one good reflexivity term.
  \item For any $C$ and $c$, every extension of $c$ to $\Id_A$ is good in a unique way.
  \end{itemize}
\end{thm}
\begin{proof}
  The projection $(\Gamma.A)^\ivl_\Gamma \to \Gamma.A\times_\Gamma \Gamma.A$ is the pullback corner map for the fibrant object $\Gamma.A\in\sM/\Gamma$ and the cofibration $\mathbf{2}\to \ivl$.
  Since $\sM/\Gamma$ is a simplicial model category, this map is a fibration, hence the comprehension of a type over $\Gamma.A.A$.

  The stability of simplicial powers under pullback gives the reindexing operations for good identity types and good reflexivity terms.
  Note that unlike for many other type constructors such as $\Sigma$- and $\Pi$-types, although these identity types are determined by a 1-categorical universal property, the type-theoretic data we consider (the reflexivity term) is not sufficient to describe this universal property.

  Similarly, the inclusion $\Gamma.A\to (\Gamma.A)^\ivl_\Gamma$ is the pullback corner map for $A$ and the projection $\ivl \to \mathbf{1}$.
  Since $\Gamma.A$ is fibrant in $\sM/\Gamma$ and $\ivl \to \mathbf{1}$ is a weak equivalence between fibrant objects, this is a weak equivalence.
  Moreover, it is a split monomorphism, hence a cofibration, and thus an acyclic cofibration.
  It follows that given any $C$ and $c$ there exists such an extension, i.e.\ the family of good extensions is non-empty.
  Of course the reindexing of any extension is again an extension, and pseudofunctoriality is automatic.
\end{proof}

By the adjointness between simplicial powers and copowers, a simplicial homotopy $A\ten\ivl \to B$ between $f,g:A\toto B$ is equivalently a lift of $(f,g):A\to B\times B$ to any canonical identity type $\Id_B = B^\ivl$, i.e.\ a term of $\Id_B[(f,g)]$ in context $A$.
But in order to rephrase \cref{defn:ivl-pushout} relative to a stable class of identity types, we also need to talk about ``homotopies over homotopies'', for which we need \emph{dependent identity types}.
Inside of type theory, the dependent identity type looks like this, for a dependent type $x:A \types B(x)\fibtype$:
\[ a_1:A, a_2:A, e:\id[A]{a_1}{a_2}, b_1:A(a_1), b_2:A(a_2) \types \idover[x.B(x)]{b_1}{b_2}{e} \fibtype \]
That is, it tells us how to identify two points in different fibers along a path in the base.
Inside type theory, there are many ways to define such a type:
\begin{enumerate}
\item If we first define the \emph{transport} operation $\transf{e}:B(x) \to B(y)$ (using the eliminator for identity types), then we can define $\idover[x.B(x)]{u}{v}{e}$ to be $\id[B(y)]{\transf{e}(u)}{v}$.
  This is the definition used by~\cite{hottbook} and~\cite{hottcoq}.\label{item:idover1}
\item We could instead use $\id[B(x)]{u}{\transf{(\opp{e})}(v)}$, where $\opp{e}:\id[A]{y}{x}$ is the inverse path of $e$ (i.e.\ $\opp{(\blank)}$ witnesses the symmetry of equality).\label{item:idover2}
\item We could use the eliminator for identity types on $e$, with $\idover[x.B(x)]{u}{v}{\refl_x}$ defined to be $\id[B(x)]{u}{v}$.
  This is the definition used by~\cite{hottagda}.\label{item:idover3}
\item We could define $\idover[x.B(x)]{u}{v}{e}$ as an inductive family, with a single constructor giving for any $x:A$ and $u:B(x)$ an element $\refl_u : \idover[x.B(x)]{u}{u}{\refl_x}$.\label{item:idover4}
\end{enumerate}
In a good model category, there is still another definition using $\ivl$ (see \cref{thm:stable-dep-id} below).
To remain agnostic between all these choices, we introduce dependent identity types as their own type constructor.

\begin{defn}
  Suppose \C has a stable class of identity types.
  A \textbf{stable class of dependent identity types} relative to this stable class consists of the following data, each of which must be weakly stable in a straightforward sense.
  \begin{itemize}
  \item For each $A\in\T(\Gamma)$ and $B\in\T(\Gamma.A)$, and each good identity type $\Id_A\in \G_\Id(A)$, a non-empty family $\dG_\Id(A,\Id_A,B)$ of ``good dependent identity types'' $\Id^A_B$ in $\T(\Gamma.A.A.\Id_A.B.B)$.
  \item For each good dependent identity type as above, and each good reflexivity term $\r_A$ for $\Id_A$, a non-empty family $\dG_\r(A,\Id_A,\r,B,\Id^A_B)$ of ``good dependent reflexivity terms'' that are sections of $\Id^A_B[\delta_A,\r_A,\delta_B] \in \T(\Gamma.A.B)$.
  \item For each good dependent identity type and good dependent reflexivity term as above, and each type $C\in \T(\Gamma.A.A.\Id_A.B.B.\Id^A_B)$ equipped with a section $c$ of $C[\delta_A,\r_A,\delta_B,\r^A_B]\in \T(\Gamma.A.B)$, a nonempty family $\dG_\J(A,\Id_A,\r_A,B,\Id^A_B,\r^A_B)$ of ``good extensions'' of $c$ to a section of $C$ itself (which are actually extensions thereof).
  \end{itemize}
\end{defn}

Similarly to the non-dependent case, the underlying data of a good dependent identity type and a good dependent reflexivity term consist of a factorization of the diagonal of $\Gamma.A.B$ that lies over a given factorization of the diagonal of $\Gamma.A$, such that the dashed pullback map shown below is a dependent projection:
\[
\begin{tikzcd}[row sep=huge,column sep=huge]
  \Gamma.A.B \ar[r] \ar[d] & \Gamma.A.A.\Id_A.B.B.\Id^A_B \ar[rr] \ar[d] \ar[drr,phantom,near start,"\Gamma.A.A.\Id_A.B.B"{name=hi}] \ar[dashed,to=hi] && \Gamma.A.A.B.B \ar[d] \ar[from=hi] \\
  \Gamma.A \ar[r] & \Gamma.A.A.\Id_A \ar[rr] \ar[from=hi] && \Gamma.A.A
\end{tikzcd}
\]

\begin{thm}\label{thm:stable-dep-id}
  If \sM is a good model category, then \Mf has a \textbf{canonical stable class of dependent identity types} over the canonical stable class of identity types, in which:
  \begin{itemize}
  \item $\dG_\Id(A,\Id_A,B)$ is the set of objects of $\sM/\Gamma$ equipped with the universal property of a simplicial power $(\Gamma.A.B)^\ivl_\Gamma$.
  \item For each such object, the above factorization is given by the following diagram:
    \[
    \begin{tikzcd}[row sep=large]
      \Gamma.A.B \ar[r] \ar[d] & (\Gamma.A.B)^\ivl_\Gamma \ar[rr] \ar[d] \ar[drr,phantom,near start,"\bullet"{name=hi}] \ar[dashed,to=hi] && \Gamma.A.A.B.B \ar[d] \ar[from=hi] \\
      \Gamma.A \ar[r] & (\Gamma.A)^\ivl_\Gamma \ar[rr] \ar[from=hi] && \Gamma.A.A
    \end{tikzcd}
    \]
    In particular, every good dependent identity type has a unique good dependent reflexivity term.
  \item for any $C$ and $c$, every extension of $c$ to $\Id^A_B$ is good.
  \end{itemize}
\end{thm}
\begin{proof}
  Similarly to the non-dependent case, the dotted projection above is the pullback corner map for the fibration $\Gamma.A.B\to\Gamma.A$ and the cofibration $\mathbf{2}\to \ivl$ in the simplicial model category $\sM/\Gamma$, hence a fibration.
  The inclusion $\Gamma.A.B \to (\Gamma.A.B)^\ivl_\Gamma$ is an acyclic cofibration for the same reasons as in \cref{thm:stable-id}, so the set of good extensions is non-empty.
\end{proof}

Finally, in \cref{defn:ivl-pushout} we also need to postcompose a homotopy with a dependent function.
That is, given $x:A \types f(x):B(x)$, we need the following term:
\[ a_1:A, a_2:A, e:\id[A]{a_1}{a_2} \types \ap_f(e) : \idover[x.B(x)]{e}{f(a_1)}{f(a_2)} \]
Inside type theory there is a standard way to define $\ap$, defined using the eliminator for the identity type.
However, once again, in a good model category there is a different way to define it using the functoriality of simplicial powers (see \cref{thm:stable-ap}).
Thus, we also introduce this abstractly.

\begin{defn}
  Suppose \C has stable classes of identity types and dependent identity types.
  A \textbf{stable class of identity applications} consists of, for each types $A\in\T(\Gamma)$ and $B\in\T(\Gamma.A)$, each section $f$ of $B$, each good identity type and reflexivity term for $A$, and each corresponding dependent identity type and dependent reflexivity term for $B$, a non-empty family of ``good identity applications'', which are sections $\ap_f$ of the projection $\Gamma.A.A.\Id_A.B.B.\Id^A_B \to \Gamma.A.A.\Id_A$ such that the following squares commute:
  \[
  \begin{tikzcd}
    \Gamma.A.B \ar[r,"\r"] & \Gamma.A.A.\Id_A.B.B.\Id^A_B \ar[r] & \Gamma.A.A.B.B \\
    \Gamma.A \ar[r,"\r"] \ar[u,"f"] & \Gamma.A.A.\Id_A \ar[u,"{\ap_f}"] \ar[r] & \Gamma.A.A \ar[u,"{(f,f)}",swap]
  \end{tikzcd}
  \]
  Moreover, good identity applications must be weakly stable under reindexing in an evident sense.
\end{defn}

\begin{thm}\label{thm:stable-ap}
  If \sM is a good model category, then \Mf has a \textbf{canonical stable class of identity applications} over the canonical stable classes of identity types and dependent identity types, in which the good sections $\ap_f$ are the maps $f^\ivl_\Gamma$ induced by the functoriality of simplicial powers.
\end{thm}
\begin{proof}
  The requisite squares commute by the two-variable functoriality of simplicial powers.
\end{proof}

Note that in order for these maps to be well-defined, we must require an object of $\G_\Id(A)$ to be \emph{equipped with} the structure of a simplicial power, and hence $\G_\Id(A)$ cannot be merely a sub\emph{set} of $\T(\Gamma.A.A)$, since this structure is not determined even by the reflexivity term.

Finally, we can define a type-theoretic notion of pushout.

\begin{defn}\label{defn:pushout}
  Suppose $\C$ has stable classes of identity types, dependent identity types, and identity applications.
  A \textbf{stable class of typal pushouts} relative to these stable classes consists of the following data, all weakly stable under reindexing.
  \begin{itemize}
  \item For each pair $f_1:\Gamma.A\to \Gamma.B_1$ and $f_2:\Gamma.A\to \Gamma.B_2$ of morphisms over $\Gamma$, a non-empty family of ``good pushout types'' $D\in\T(\Gamma)$ equipped with ``good injections'' $\nu_i : \Gamma.B_i \to \Gamma.D$ over $\Gamma$.
  \item For any good pushout $D$ and good injections $\nu_i$, and any good identity type for $D$, a non-empty family of ``good glueing data'' maps $\mu : \Gamma.A \to \Gamma.D.D.\Id_D$ over $(\nu_1 f_1,\nu_2 f_2)$.
  \item For any good identity type, good reflexivity term, and good gluing data and good injections for a good pushout $D$, and any type $C\in\T(D)$ equipped with sections $t_i$ over $\nu_i$, a good dependent identity type $\Id^D_C$ with good reflexivity term, and a morphism $u:A\to \Gamma.D.D.\Id_D.C.C.\Id^D_C$ over $(\mu,t_1,t_2)$, a non-empty family of good sections $s$ of $C$ such that $s \circ \nu_i = t_i$, and for any good identity application $\ap_s$ we have $\ap_s \circ \mu = u$.
  \end{itemize}
\end{defn}

\begin{thm}
  In any good model category, the $\ivl$-typal pushouts (\cref{defn:ivl-pushout}) are a stable class of typal pushouts relative to the canonical stable classes of identity types, dependent identity types, and identity applications.
\end{thm}
\begin{proof}
  The canonical stable classes were constructed exactly so that the data of \cref{defn:pushout} reduces to that of \cref{defn:ivl-pushout}.
\end{proof}



\bibliographystyle{alpha}
\bibliography{basictex/all}

\end{document}
